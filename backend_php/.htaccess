RewriteEngine On
RewriteBase /api/

# Handle CORS (wrapped in IfModule for compatibility)
<IfModule mod_headers.c>
  Header set Access-Control-Allow-Origin "*"
  Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
  Header set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With"
</IfModule>

# Handle Options method
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ - [R=200,L]

# Remove .php extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L]

# Routing for Projects
# projects/123 -> projects/read_one.php?id=123
RewriteRule ^projects/([0-9]+)$ projects/read_one.php?id=$1 [L,QSA]

# Routing for Careers
RewriteRule ^careers/([0-9]+)$ careers/read_one.php?id=$1 [L,QSA]

# Routing for Applications
RewriteCond %{REQUEST_METHOD} PUT
RewriteRule ^applications/([0-9]+)$ applications/update.php?id=$1 [L,QSA]

RewriteCond %{REQUEST_METHOD} DELETE
RewriteRule ^applications/([0-9]+)$ applications/delete.php?id=$1 [L,QSA]
